(function($){
/*@cc_on
	// Fix for IE's inability to handle arguments to setTimeout/setInterval
	// From http://webreflection.blogspot.com/2007/06/simple-settimeout-setinterval-extra.html
	(function(f){
		window.setTimeout =f(window.setTimeout);
		window.setInterval =f(window.setInterval);
	})(function(f){return function(c,t){var a=[].slice.call(arguments,2);return f(function(){c.apply(this,a)},t)}});
	@*/
var fullScreenApi={supportsFullScreen:false,isFullScreen:function(){return false},requestFullScreen:function(){},cancelFullScreen:function(){},fullScreenEventName:"",prefix:""},browserPrefixes="webkit moz o ms khtml".split(" ");if(typeof document.cancelFullScreen!="undefined"){fullScreenApi.supportsFullScreen=true}else{for(var i=0,il=browserPrefixes.length;i<il;i++){fullScreenApi.prefix=browserPrefixes[i];if(typeof document[fullScreenApi.prefix+"CancelFullScreen"]!="undefined"){fullScreenApi.supportsFullScreen=true;break}}}if(fullScreenApi.supportsFullScreen){fullScreenApi.fullScreenEventName=fullScreenApi.prefix+"fullscreenchange";fullScreenApi.isFullScreen=function(){switch(this.prefix){case"":return document.fullScreen;case"webkit":return document.webkitIsFullScreen;default:return document[this.prefix+"FullScreen"]}};fullScreenApi.requestFullScreen=function(el){return(this.prefix==="")?el.requestFullScreen():el[this.prefix+"RequestFullScreen"]()};fullScreenApi.cancelFullScreen=function(el){return(this.prefix==="")?document.cancelFullScreen():document[this.prefix+"CancelFullScreen"]()}}if(typeof jQuery!="undefined"){jQuery.fn.requestFullScreen=function(){return this.each(function(){if(fullScreenApi.supportsFullScreen){fullScreenApi.requestFullScreen(this)}})}}window.fullScreenApi=fullScreenApi;var G={};G.sum=function(a){var i,sum;for(i=0,sum=0;i<a.length;sum+=a[i++]){}return sum};if(typeof Array.prototype.max==="undefined"){G.max=function(a){return Math.max.apply({},a)}}else{G.max=function(a){return a.max()}}if(typeof Array.prototype.min==="undefined"){G.min=function(a){return Math.min.apply({},a)}}else{G.min=function(a){return a.min()}}G.mean=function(a){return G.sum(a)/a.length};G.stddev=function(a){return Math.sqrt(G.variance(a))};G.log10=function(v){return Math.log(v)/2.302585092994046};G.variance=function(a){var mean=G.mean(a),variance=0;for(var i=0;i<a.length;i++){variance+=Math.pow(a[i]-mean,2)}return variance/(a.length-1)};if(typeof Object.extend==="undefined"){G.extend=function(destination,source){for(var property in source){if(source.hasOwnProperty(property)){destination[property]=source[property]}}return destination}}else{G.extend=Object.extend}if(Object.keys){G.keys=Object.keys}else{G.keys=function(o){if(o!==Object(o)){throw new TypeError("Object.keys called on non-object")}var ret=[],p;for(p in o){if(Object.prototype.hasOwnProperty.call(o,p)){ret.push(p)}}return ret}}function is(a,b){return(typeof a==b)?true:false}function parseColour(c){if(c.indexOf("#")!=0){return c}rgb=parseInt(c.substr(1),16);r=(rgb&(255<<16))>>16;g=(rgb&(255<<8))>>8;b=(rgb&255);return"rgb("+r+","+g+","+b+")"}function addCommas(nStr){nStr+="";var x=nStr.split(".");var x1=x[0];var x2=x.length>1?"."+x[1]:"";var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,"$1,$2")}return x1+x2}function getJD(today){if(!today){today=new Date()}return(today.getTime()/86400000)+2440587.5}function getStyle(el,styleProp){if(typeof window==="undefined"){return}var style;var el=document.getElementById(el);if(el.currentStyle){style=el.currentStyle[styleProp]}else{if(window.getComputedStyle){style=document.defaultView.getComputedStyle(el,null).getPropertyValue(styleProp)}}if(style&&style.length===0){style=null}return style}function Canvas(i){if(!(typeof i=="string"||(typeof i=="object"&&typeof i.id=="string"))){return}this.id="";this.canvas="";this.c="";this.wide=0;this.tall=0;this.fullscreen=false;this.fullwindow=false;this.transparent=false;this.color="";this.background="rgb(255,255,255)";this.events={resize:""};this.ie=false;this.excanvas=(typeof G_vmlCanvasManager!="undefined")?true:false;
/*@cc_on
		this.ie = true
		@*/
var n="number";var s="string";var b="boolean";var o="object";var f="function";if(is(i.id,s)){this.id=i.id}if(is(i.background,s)){this.background=i.background}if(is(i.color,s)){this.color=i.color}if(is(i.width,n)){this.wide=i.width}if(is(i.height,n)){this.tall=i.height}if(is(i.fullwindow,b)){this.fullwindow=i.fullwindow}if(is(i.transparent,b)){this.transparent=i.transparent}if(!this.id){return}this.container=$("#"+this.id);if(this.container.length==0){$("body").append('<div id="'+this.id+'"></div>');this.container=$("#"+this.id)}this.container.css("position","relative");$(window).bind("resize",{me:this},function(ev){ev.data.me.resize()});if(this.wide>0){this.container.css("width",this.wide)}this.wide=this.container.width();if(this.tall>0){this.container.css("height",this.tall)}this.tall=this.container.height();this.container.attr("id",this.id+"holder");this.container.html('<canvas id="'+this.id+'" style="display:block;font:inherit;"></canvas>');this.containerbg=this.container.css("background");this.canvas=$("#"+this.id);this.c=document.getElementById(this.id);if(this.excanvas){this.c=G_vmlCanvasManager.initElement(this.c)}if(this.c&&this.c.getContext){this.setWH(this.wide,this.tall);this.ctx=this.c.getContext("2d");this.ctx.clearRect(0,0,this.wide,this.tall);this.ctx.beginPath();var fs=16;this.ctx.font=fs+"px sans-serif";this.ctx.fillStyle="rgb(0,0,0)";this.ctx.lineWidth=1.5;var loading="Loading graph...";this.ctx.fillText(loading,(this.wide-this.ctx.measureText(loading).width)/2,(this.tall-fs)/2);this.ctx.fill()}this.canvas.bind("mousemove",{me:this},function(e){e.data.me.trigger("mousemove",{event:e})});if(fullScreenApi.supportsFullScreen){this.canvas.bind("dblclick",{me:this},function(e){e.data.me.toggleFullScreen()})}}Canvas.prototype.bind=function(ev,e,fn){if(typeof ev!="string"){return this}if(typeof fn=="undefined"){fn=e;e={}}else{e={data:e}}if(typeof e!="object"||typeof fn!="function"){return this}if(this.events[ev]){this.events[ev].push({e:e,fn:fn})}else{this.events[ev]=[{e:e,fn:fn}]}return this};Canvas.prototype.trigger=function(ev,args){if(typeof ev!="string"){return}if(typeof args!="object"){args={}}var o=[];if(typeof this.events[ev]=="object"){for(i=0;i<this.events[ev].length;i++){var e=G.extend(this.events[ev][i].e,args);if(typeof this.events[ev][i].fn=="function"){o.push(this.events[ev][i].fn.call(this,e))}}}if(o.length>0){return o}};Canvas.prototype.toggleFullScreen=function(){if(fullScreenApi.supportsFullScreen){this.elem=document.getElementById(this.id+"holder");if(fullScreenApi.isFullScreen()){fullScreenApi.cancelFullScreen(this.elem);this.fullscreen=false}else{fullScreenApi.requestFullScreen(this.elem);this.fullscreen=true}}};Canvas.prototype.resize=function(w,h){if(!this.canvas){return}if(!w||!h){if(this.fullscreen&&!fullScreenApi.isFullScreen()){this.fullscreen=false}if(this.fullscreen){this.container.css("background","white")}else{this.container.css("background",this.containerbg)}if(this.fullwindow){this.canvas.css({width:0,height:0});w=$(window).width();h=$(window).height();this.canvas.css({width:w,height:h});$(document).css({width:w,height:h})}else{this.canvas.css({width:0,height:0});w=this.container.outerWidth();h=this.container.outerHeight();this.canvas.css({width:w,height:h})}}if(w==this.wide&&h==this.tall){return}this.setWH(w,h);this.trigger("resize",{w:w,h:h})};Canvas.prototype.setWH=function(w,h){if(!w||!h){return}this.c.width=w;this.c.height=h;this.wide=w;this.tall=h;if(this.ie&&$.browser.version==8){$("#"+this.id).find("div").css({width:w,height:h})}this.canvas.css({width:w,height:h})};function Graph(element,data,options){this.version="0.1.1";this.logging=true;this.start=new Date();if(typeof element!="string"){return}this.id=element;this.data={};this.chart={};this.options={};this.canvas=new Canvas({id:this.id});this.canvas.bind("resize",{me:this},function(ev){if(ev.data.me.logging){var d=new Date()}ev.data.me.setOptions();ev.data.me.calculateData();ev.data.me.draw();if(ev.data.me.logging){console.log("Total until end of resize:"+(new Date()-d)+"ms")}}).bind("mousemove",{me:this},function(ev){ev.data.me.highlight(ev.data.me.dataAtMousePosition(ev.event.layerX,ev.event.layerY))});this.setOptions(options);this.setColours();this.updateData(data)}Graph.prototype.setOptions=function(options){options=options||{};if(typeof this.options!="object"){this.options={}}this.options.width=parseInt(getStyle(this.id,"width"),10);this.options.height=parseInt(getStyle(this.id,"height"),10);this.options=G.extend(this.options,options)};Graph.prototype.updateData=function(data){this.data=this.data=(data.length>1)?data:[data];this.setGraphRange();this.calculateData();this.clear();this.draw()};Graph.prototype.setColours=function(){this.colours={background:"",lines:"rgb(0,0,0)",labels:"rgb(0,0,0)"};if(this.options.grid&&typeof this.options.grid.background=="string"){this.colours.background=this.options.grid.background}if(this.options.grid&&typeof this.options.grid.color=="string"){this.colours.lines=this.options.grid.color}if(typeof this.options.labels=="string"){this.colours.labels=this.options.grid.color}};Graph.prototype.setGraphRange=function(){this.x={min:1e+32,max:-1e+32,log:((this.options.xaxis&&this.options.xaxis.log)?this.options.xaxis.log:false),label:{text:(this.options.xaxis&&this.options.xaxis.label?this.options.xaxis.label:"")},fit:((this.options.xaxis&&this.options.xaxis.fit)?this.options.xaxis.fit:false)};this.y={min:1e+32,max:-1e+32,log:((this.options.yaxis&&this.options.yaxis.log)?this.options.yaxis.log:false),label:{text:(this.options.yaxis&&this.options.yaxis.label?this.options.yaxis.label:"")},fit:((this.options.yaxis&&this.options.yaxis.fit)?this.options.yaxis.fit:false)};if(this.data.length<=0){return false}this.errors=(this.options.useerrorsforrange)?this.data[0].data[0].length-2:0;for(var i=0;i<this.data.length;i++){max=this.data[i].data.length;if(this.data[0].data[0].length-2>0){var errs=new Array();for(var j=0;j<max;j++){if(this.data[i].data[j][2]){errs.push(this.data[i].data[j][2])}}m=G.stddev(errs);errors=(m)?[m,m]:[0,0]}else{errors=[0,0]}for(var j=0;j<max;j++){if(this.data[i].data[j][0]-errors[0]<this.x.min){this.x.min=this.data[i].data[j][0]-errors[0]}if(this.data[i].data[j][0]+errors[0]>this.x.max){this.x.max=this.data[i].data[j][0]+errors[0]}if(this.data[i].data[j][1]-errors[1]<this.y.min){this.y.min=this.data[i].data[j][1]-errors[1]}if(this.data[i].data[j][1]+errors[1]>this.y.max){this.y.max=this.data[i].data[j][1]+errors[1]}}}this.x.datamin=this.x.min;this.x.datamax=this.x.max;this.x.datarange=this.x.max-this.x.min;this.y.datamin=this.y.min;this.y.datamax=this.y.max;this.defineAxes();return true};Graph.prototype.getYOff=function(y){if(this.y.log){y=G.log10(y)}return this.chart.height*y/(this.y.range)};Graph.prototype.getYPos=function(y){if(this.y.log){y=G.log10(y)}return(y<this.y.min||y>this.y.max)?(y>this.y.max?this.chart.top:this.chart.top+this.chart.height):this.options.height-(this.chart.bottom+this.chart.height*((y-this.y.min)/(this.y.range)))};Graph.prototype.getXPos=function(x){if(this.x.log){x=G.log10(x)}if(this.x.fit){return(x<this.x.datamin||x>this.x.datamax)?(x<this.x.datamin?this.chart.left-1:this.chart.left+this.chart.width+1):(this.x.dir=="reverse"?this.chart.left+this.chart.width*(Math.abs(this.x.datamax-x)/(this.x.range)):this.chart.left+this.chart.width*(Math.abs(x-this.x.datamin)/(this.x.datarange)))}return(x<this.x.min||x>this.x.max)?(x<this.x.min?this.chart.left:this.chart.left+this.chart.width):(this.x.dir=="reverse"?this.chart.left+this.chart.width*(Math.abs(this.x.max-x)/(this.x.range)):this.chart.left+this.chart.width*(Math.abs(x-this.x.min)/(this.x.range)))};Graph.prototype.getPixPos=function(x,y){return[this.getXPos(x),this.getYPos(y)]};Graph.prototype.dataAtMousePosition=function(x,y){s="string";var found="";search=[[0,0],[-1,0],[1,0],[0,-1],[0,1],[1,1],[1,-1],[-1,1],[-1,-1],[-2,0],[0,-2],[2,0],[0,2],[-1,-2],[1,-2],[2,-1],[2,1],[1,2],[-1,2],[-2,1],[-2,-1]];for(i=0;i<search.length;i++){dx=x+search[i][0];dy=y+search[i][1];if(is(this.lookup[dx][dy],s)){return this.lookup[dx][dy].split(":")}}};Graph.prototype.highlight=function(d){if(this.lookup&&d&&d.length==2){s=d[0];i=d[1];twopi=2*Math.PI;rad=(this.data[s].points.radius)?this.data[s].points.radius:1;ii=this.getPixPos(this.data[s].data[i][0],this.data[s].data[i][1]);this.canvas.ctx.beginPath();this.canvas.ctx.lineWidth=1.5;this.canvas.ctx.strokeStyle=(this.data[s].color?parseColour(this.data[s].color):"#ffcc00");this.canvas.ctx.fillStyle="rgba(255,255,255,0.3)";this.canvas.ctx.arc(ii[0],ii[1],rad*6,0,twopi,false);this.canvas.ctx.fill();this.canvas.ctx.stroke();this.canvas.ctx.closePath();this.canvas.ctx.beginPath();this.canvas.ctx.arc(ii[0],ii[1],rad,0,twopi,false);this.canvas.ctx.strokeStyle=(this.data[s].color?parseColour(this.data[s].color):"#ffcc00");this.canvas.ctx.stroke();this.canvas.ctx.closePath();if(!this.coordinates){this.canvas.container.append('<div class="coordinates" style="position:absolute;background-color:#e6e6e6;background-color:rgba(220,220,220,0.9);padding:8px;-webkit-border-radius: 5px;-moz-border-radius: 5px;border-radius: 5px;"></div>');this.coordinates=this.canvas.container.find(".coordinates")}this.coordinates.show();this.coordinates.html("x = "+this.data[s].data[i][0]+"<br />y = "+this.data[s].data[i][1]).css({left:ii[0]+1,top:ii[1]+1});this.annotated=true}else{if(this.annotated){this.annotated=false;this.coordinates.hide();this.clear();this.draw()}}};Graph.prototype.defineAxes=function(min,max){this.defineAxis("x");this.defineAxis("y")};Graph.prototype.defineAxis=function(axis){if(typeof axis!="string"||(axis!="x"&&axis!="y")){return false}if(this[axis].log){this[axis].max=Math.ceil(G.log10(this[axis].max));this[axis].min=(this[axis].min<=0)?this[axis].max-2:Math.floor(G.log10(this[axis].min));this[axis].inc=1;this[axis].range=this[axis].max-this[axis].min;return true}this[axis].range=this[axis].max-this[axis].min;if(this[axis].range<0){this[axis].inc=0;return true}else{if(this[axis].range==0){this[axis].min=Math.ceil(this[axis].max)-1;this[axis].max=Math.ceil(this[axis].max);this[axis].inc=1;this[axis].range=this[axis].max-this[axis].min;return true}}t_inc=Math.pow(10,Math.ceil(G.log10(this[axis].range/10)));t_max=(Math.floor(this[axis].max/t_inc))*t_inc;if(t_max<this[axis].max){t_max+=t_inc}t_min=t_max;var i=0;do{i++;t_min-=t_inc}while(t_min>this[axis].min);if(Math.abs(t_min)<1e-15){t_min=0}while(i<5){t_inc/=2;if((t_min+t_inc)<=this[axis].min){t_min+=t_inc}if((t_max-t_inc)>=this[axis].max){t_max-=t_inc}i=i*2}this[axis].min=t_min;this[axis].max=t_max;this[axis].inc=t_inc;this[axis].range=this[axis].max-this[axis].min;return true};Graph.prototype.getChartOffset=function(){if(typeof this.chart!="object"){this.chart={}}var fs=getStyle(this.canvas.id,"font-size");var ff=getStyle(this.canvas.id,"font-family");if(this.canvas.fullscreen){this.chart.padding=this.canvas.wide/40;this.chart.fontsize=this.canvas.wide/80;this.chart.fontfamily=(typeof ff=="string")?ff:""}else{this.chart.padding=0;this.chart.fontsize=(typeof fs=="string")?parseInt(fs):12;this.chart.fontfamily=(typeof ff=="string")?ff:""}this.chart.top=this.chart.padding+0.5;this.chart.left=(this.y.label.text)?this.chart.padding+Math.round(3.5*this.chart.fontsize)-0.5:this.chart.padding+Math.round(3*this.chart.fontsize)-0.5;this.chart.right=this.chart.padding+0.5;this.chart.bottom=(this.x.label.text)?this.chart.padding+Math.round(4.5*this.chart.fontsize/2)-0.5:this.chart.padding+Math.round(2.5*this.chart.fontsize/2)+0.5;this.chart.width=this.canvas.wide-this.chart.right-this.chart.left;this.chart.height=this.canvas.tall-this.chart.bottom-this.chart.top};Graph.prototype.drawAxes=function(){grid=(this.options.grid&&typeof this.options.grid.show=="boolean")?this.options.grid.show:true;o=this.chart;rot=Math.PI/2;this.canvas.ctx.beginPath();this.canvas.ctx.font=this.chart.fontsize+"px "+this.chart.fontfamily;this.canvas.ctx.textBaseline="middle";this.canvas.ctx.strokeStyle="rgb(0,0,0)";this.canvas.ctx.lineWidth=1;if(this.options.grid&&typeof this.options.grid.background=="string"){this.canvas.ctx.fillStyle=this.options.grid.background;this.canvas.ctx.fillRect(o.left,o.top,o.width,o.height)}this.canvas.ctx.strokeRect(o.left,o.top,o.width,o.height);if(this.x.label.text!=""){this.canvas.ctx.textAlign="center";this.canvas.ctx.fillStyle=(this.x.label.color?this.x.label.color:"black");this.canvas.ctx.fillText(this.x.label.text,o.left+o.width/2,this.options.height-Math.round(this.chart.fontsize/2)-this.chart.padding)}if(this.y.label.text!=""){this.canvas.ctx.textAlign="center";this.canvas.ctx.fillStyle=(this.x.label.color?this.x.label.color:"black");this.canvas.ctx.rotate(-rot);this.canvas.ctx.fillText(this.y.label.text,-(o.top+(o.height/2)),Math.round(this.chart.fontsize/2)+this.chart.padding);this.canvas.ctx.rotate(rot)}this.canvas.ctx.closePath();if(!this.subgrid){v=[2,3,4,5,6,7,8,9];this.subgrid=[];for(var i=0;i<v.length;i++){this.subgrid[i]=G.log10(v[i])}}this.canvas.ctx.font="11px";this.canvas.ctx.lineWidth=(this.options.grid.width?this.options.grid.width:0.5);this.canvas.ctx.textAlign="end";x1=this.chart.left;x2=this.chart.left+this.chart.width;prec=""+this.y.inc;prec=prec.length-prec.indexOf(".")-1;for(var i=this.y.min;i<=this.y.max;i+=this.y.inc){y=this.getYPos((this.y.log?Math.pow(10,i):i));if(!y){continue}y=(y-Math.round(y)>0)?Math.floor(y)+0.5:Math.ceil(y)-0.5;j=i.toFixed(prec);a=(j==this.y.max)?6:(j==this.y.min?-6:0);this.canvas.ctx.beginPath();this.canvas.ctx.strokeStyle=(this.options.grid.color?this.options.grid.color:"rgba(0,0,0,0.5)");this.canvas.ctx.fillText((this.y.log?Math.pow(10,j):j),x1-3,(y+a).toFixed(1));if(grid&&i!=this.y.min&&i!=this.y.max){this.canvas.ctx.moveTo(x1,y);this.canvas.ctx.lineTo(x2,y)}this.canvas.ctx.stroke();this.canvas.ctx.closePath();if(grid&&this.y.log){this.canvas.ctx.beginPath();s=(this.options.grid.sub)?this.options.grid.sub:{};this.canvas.ctx.strokeStyle=(s.color?s.color:"rgba(0,0,0,0.2)");this.canvas.ctx.lineWidth=(s.width?s.width:0.5);for(var j=0;j<this.subgrid.length;j++){di=i+this.subgrid[j];if(di<this.y.max){y=this.getYPos(Math.pow(10,di))+0.5;y=(y-Math.round(y)>0)?Math.floor(y)+0.5:Math.ceil(y)-0.5;this.canvas.ctx.moveTo(x1,y);this.canvas.ctx.lineTo(x2,y)}}this.canvas.ctx.stroke();this.canvas.ctx.closePath()}}this.canvas.ctx.closePath();this.canvas.ctx.textBaseline="top";y1=this.chart.top+this.chart.height;y2=this.chart.top;for(var i=this.x.min;i<=this.x.max;i+=this.x.inc){x=this.getXPos((this.x.log?Math.pow(10,i):i));if(!x||x<this.chart.left||x>this.chart.left+this.chart.width){continue}x=(x-Math.round(x)>0)?Math.floor(x)+0.5:Math.ceil(x)-0.5;this.canvas.ctx.beginPath();this.canvas.ctx.textAlign=(i==this.x.max)?"end":(i==this.x.min?"start":"center");this.canvas.ctx.strokeStyle=(this.options.grid.color?this.options.grid.color:"rgba(0,0,0,0.5)");this.canvas.ctx.fillText(addCommas((this.x.log?Math.pow(10,i):i)),x.toFixed(1),(y1+3).toFixed(1));if(grid&&i!=this.x.min&&i!=this.x.max){this.canvas.ctx.moveTo(x,y1);this.canvas.ctx.lineTo(x,y2);this.canvas.ctx.stroke()}this.canvas.ctx.closePath();if(grid&&this.x.log){this.canvas.ctx.beginPath();s=(this.options.grid.sub)?this.options.grid.sub:{};this.canvas.ctx.strokeStyle=(s.color?s.color:"rgba(0,0,0,0.2)");for(var j=0;j<this.subgrid.length;j++){di=i+this.subgrid[j];if(di<this.x.max){x=this.getXPos(Math.pow(10,di));x=(x-Math.round(x)>0)?Math.floor(x)+0.5:Math.ceil(x)-0.5;this.canvas.ctx.moveTo(x,this.chart.top);this.canvas.ctx.lineTo(x,y1)}}this.canvas.ctx.stroke();this.canvas.ctx.closePath()}}};Graph.prototype.calculateData=function(){this.getChartOffset();this.lookup=new Array(this.canvas.wide);for(i=0;i<this.canvas.wide;i++){this.lookup[i]=new Array(this.canvas.tall)}for(var s=0;s<this.data.length;s++){l=this.data[s].data.length;this.data[s].x=new Array(l);this.data[s].y=new Array(l);for(var i=0;i<l;i++){ii=this.getPixPos(this.data[s].data[i][0],this.data[s].data[i][1]);if(typeof ii[0]=="number"&&typeof ii[1]=="number"&&this.data[s].hoverable){this.lookup[Math.round(ii[0])][Math.round(ii[1])]=s+":"+i}this.data[s].x[i]=ii[0];this.data[s].y[i]=ii[1]}}};Graph.prototype.drawData=function(){var lo,hi,x,y,ii,l;var twopi=Math.PI*2;for(var s=0;s<this.data.length;s++){this.canvas.ctx.strokeStyle=(this.data[s].color?parseColour(this.data[s].color):"#ffcc00");if(this.data[s].lines.show){this.canvas.ctx.beginPath();this.canvas.ctx.lineWidth=(this.data[s].lines.lineWidth?this.data[s].lines.lineWidth:1);for(var i=0;i<this.data[s].x.length;i++){if(this.data[s].x[i]&&this.data[s].y[i]){if(i==0){this.canvas.ctx.moveTo(this.data[s].x[i],this.data[s].y[i])}else{this.canvas.ctx.lineTo(this.data[s].x[i],this.data[s].y[i])}}}this.canvas.ctx.stroke();this.canvas.ctx.closePath()}var rad=(this.data[s].points.radius)?this.data[s].points.radius:1;if(this.data[s].points.show){this.canvas.ctx.fillStyle=(this.data[s].color?parseColour(this.data[s].color):"#ffcc00");this.canvas.ctx.lineWidth=(0.8);for(var i=0;i<this.data[s].x.length;i++){if(this.data[s].x[i]&&this.data[s].y[i]){if(this.data[s].y[i]<this.chart.top+this.chart.height){this.canvas.ctx.moveTo(this.data[s].x[i],this.data[s].y[i]);this.canvas.ctx.beginPath();this.canvas.ctx.arc(this.data[s].x[i],this.data[s].y[i],rad,0,twopi,false);this.canvas.ctx.stroke();e=this.data[s].data[0].length-2;if(e>0){if(e==2){hi=this.getYPos(this.data[s].data[i][1]+this.data[s].data[i][2]);lo=this.getYPos(this.data[s].data[i][1]-this.data[s].data[i][3])}else{hi=this.getYPos(this.data[s].data[i][1]+this.data[s].data[i][2]);lo=this.getYPos(this.data[s].data[i][1]-this.data[s].data[i][2])}if(hi&&lo){this.canvas.ctx.beginPath();this.canvas.ctx.moveTo(this.data[s].x[i],lo);this.canvas.ctx.lineTo(this.data[s].x[i],hi);this.canvas.ctx.stroke();this.canvas.ctx.closePath()}}}}}}}};Graph.prototype.clear=function(){this.canvas.ctx.clearRect(0,0,this.canvas.wide,this.canvas.tall)};Graph.prototype.draw=function(){this.drawAxes();this.drawData()};$.graph=function(element,data,options){return new Graph(element,data,options)}})(jQuery);